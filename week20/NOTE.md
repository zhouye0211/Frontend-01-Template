# 每周总结可以写在这里

##### 第二十周

### OAuth
OAuth 就是一种授权协议。就是保证第三方（软件）只有在获得授权之后，才可以进一步访问授权者的数据。因此，OAuth 2.0 是一种安全协议。

OAuth 2.0 的核心是授权许可，更进一步说就是令牌机制。也就是说，第三方软件只有拿到了 github 平台颁发的访问令牌，也就是得到了授权许可，然后才可以代表用户访问他们的数据。

互联网中所有的受保护资源，几乎都是以 Web API 的形式来提供访问的，比如极客时间App 要获取用户的头像、昵称，小兔软件要获取用户的店铺订单，我们说 OAuth 2.0 与安全相关，是用来保护 Web API 的。另外，第三方软件通过 OAuth 2.0 取得访问权限
之后，用户便把这些权限委托给了第三方软件，所以可以说 OAuth 2.0 也是一种委托协议。

也正因为像小兔这样的第三方软件，每次都是用访问令牌而不是用户名和密码来请求用户的数据，才大大减少了安全风险上的“攻击面”。不然，我们试想一下，每次都带着用户名和密码来访问数量众多的 Web API ，是不是增加了这个“攻击面”。因此，OAuth 2.0 的核心，就是颁发访问令牌和使用访问令牌。


### 无头浏览器

将bin文件放到系统的bin文件夹里，就可以在控制台执行。

通过Phantom JS可以直接渲染出对应的页面图片，或者是获取对应的DOM结点。

先访问对应的链接，获取到github回调的code，然后处理通过code换取accesstoken，再通过accesstoken换取用户信息。

- 获取code，这一步需要在浏览器中执行，通过node，在命令行中打开浏览器，得到github的回调code
- 通过code换取token，在后端服务通过code换取对应的token，并通过token生成一个对应带有publish的a标签
- 点击发布标签，在publish-tool中完成对应的身份验证之后，即可发布对应的文件到服务器。

### 自我思考： 为什么有些站点，网站授权者授权后，不直接返回令牌？而是先返回授权码，然后第三方软件再通过授权码得到令牌？

以Web场景为例，第一次用户是跟第三方软件建立的“联系”，三方软件要把用户引导到平台一方去授权，这个时候用户实际上跟三方软件就失去了“联系”，平台如果这个时候直接把令牌给了三方软件，因为没了“联系”，三方软件就不能很方便的告诉用户。

